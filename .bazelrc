# Bazel configuration for Visa Bulletin Parser

# Use Python 3
build --python_path=/usr/bin/python3

# Show test output
test --test_output=errors

# Enable color output
common --color=yes

# Optimization flags
build --copt=-O2

# Show progress
build --show_progress_rate_limit=0.5

# Use local resources efficiently
build --local_resources=cpu=HOST_CPUS*.75
build --local_resources=memory=HOST_RAM*.5

# ============================================================================
# Cache Configuration - Speed up rebuilds and reruns
# ============================================================================

# Disk cache for build artifacts (faster rebuilds)
build --disk_cache=~/.cache/bazel/visa_bulletin

# Repository cache for external dependencies (faster fetches)
fetch --repository_cache=~/.cache/bazel/repos
build --repository_cache=~/.cache/bazel/repos

# Cache test results (skip passing tests if nothing changed)
test --cache_test_results=yes

# Speed up JVM startup
startup --host_jvm_args=-XX:+UseParallelGC

# Reuse analysis cache when possible
build --experimental_reuse_sandbox_directories

